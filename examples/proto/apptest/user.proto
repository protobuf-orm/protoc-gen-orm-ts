edition = "2023";

package apptest;

import "apptest/tenant.proto";
import "google/protobuf/timestamp.proto";
import "orm.proto";

option features.field_presence = IMPLICIT;
option go_package = "github.com/protobuf-orm/protoc-gen-orm-ts/internal/apptest";

message User {
  bytes id = 1 [(orm.field) = {
    type: TYPE_UUID
    key: true
    default: ""
  }];
  Tenant tenant = 2 [(orm.edge) = {}];
  string alias = 4 [(orm.field) = {default: ""}];
  string name = 5 [(orm.field) = {default: ""}];
  map<string, string> labels = 7;

  string lock = 8 [
    features.field_presence = EXPLICIT,
    (orm.field) = {nullable: true}
  ];

  google.protobuf.Timestamp date_updated = 14 [(orm.field) = {
    version: {}
  }];
  google.protobuf.Timestamp date_created = 15 [(orm.field) = {
    immutable: true
    default: ""
  }];

  option (orm.message) = {
    rpc: {crud: true}
    indexes: [
      {
        name: "alias"
        refs: [
          {
            name: "alias"
            number: 4
          },
          {
            name: "tenant"
            number: 2
          }
        ]
        unique: true
      }
    ]
  };
}
